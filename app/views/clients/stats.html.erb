<div class="container">
  <%= tag.h1 "Stats for #{resource.name}" %>
  <table id="datatable" class="table table-striped table-bordered">
    <thead class="thead-dark">
    <tr>
        <th>Date</th>
        <th>Requested</th>
        <th>Communicated</th>
        <th>Retests</th>
        <th>Rejected</th>
        <th>Internal Checks</th>
        <th>Positives</th>
        <th>Negatives</th>
        <th>Inconclusives</th>
        <th>Percent Positive</th>
        <th>Avg</th>
        <th>Min</th>
        <th>Max</th>
    </tr>
    </thead>
    <tbody>
    <% @stats.each do |stat| %>
      <tr>
        <td ><%= stat.date %></td>
        <td><%= stat.requested %></td>
        <td><%= stat.communicated %></td>
        <td><%= stat.retests %></td>
        <td><%= stat.rejects %></td>
        <td><%= stat.internalchecks %></td>
        <td><%= stat.positives %></td>
        <td><%= stat.negatives %></td>
        <td><%= stat.inconclusives %></td>
        <td><%= stat.percent_positive %></td>
        <td><%= Time.at(stat.avg).utc.strftime("%H:%M:%S") unless stat.avg.nil? %></td>
        <td><%= Time.at(stat.min).utc.strftime("%H:%M:%S") unless stat.min.nil? %></td>
        <td><%= Time.at(stat.max).utc.strftime("%H:%M:%S") unless stat.max.nil? %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
  <%= link_to "Download CSV", stats_client_path(resource, format: :csv), {'data-turbolinks': false}  %>
  <br/>
  <%= link_to "Download JSON", stats_client_path(resource, format: :json), {'data-turbolinks': false}  %>
  <br/>
  <%= link_to 'Back', client_path(resource) %>
</div>
