<div class="container">
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
    <tr>
      <% (1..12).each do |col| %>
        <th><%= col %></th>
      <% end %>
    </tr>
    </thead>
    <tbody>
    <%= form_with(model: plate) do |form| %>
      <% plate.wells.group_by {|w| w.row }.each do |row, row_wells| %>
        <tr>
        <%= form.fields_for :wells, row_wells do |builder| %>
            <% if builder.object.samples.any? %>
              <%= builder.fields_for :samples do |sample_builder| %>
                <td>
                  <%= "#{row} #{builder.object.column}" %>
                  <%= sample_builder.select(:state, options_for_select([['Reject', 'rejected']]), {include_blank: true }) %>
                </td>
              <% end %>
            <% else %>
              <td>No Sample</td>
            <% end %>
        <% end %>
        </tr>
    <% end  %>
      <div class="actions">
        <%= form.submit "Reject Samples",  data: { confirm: "Are you sure?" }  %>
      </div>
    <% end %>
    </tbody>
  </table>
</div>
